## 标签与污点



1 标签：

​		给节点打上自定义标签，比如加一个自定义的标签 `node-role.kubernetes.io/gpu-node`,取值可以自定义,比如取 `1`,表示这台机器上安装有GPU,后面创建工作负载时可以给需要GPU环境的工作负载的属性中也加上这样的标签,那么需要GPU环境的pod就会自动被调度到这个节点上运行.





2 污点

​		污点: key-value 对,可以根据策略选择是否调度到有污点的节点上.

​		容器组调度策略: 不允许(PodTolerateNodeTaints) / 不允许(PodToleratePriority) / 容忍(Toleration)

​		节点调度策略: 不允许调度(NoSchedule) / 尽量不调度(PreferNoSchedule) / 不允许并驱逐已有的容器组(NoExecute)

​		比如添加一个污点: node.kubernetes.io/ci 取值为 1 , 该节点作为持续集成的节点,做代码拉取 / 镜像拉取, 策略选择 

​			1 不允许调度(NoSchedule) , 那么普通的节点就不会调度到该节点上. 这个节点就不会被其他的工作负载所使用. 

​			2 尽量不调度(PreferNoSchedule) , 如果该节点仅做ci工作对资源有一定浪费,可以将策略修改为 尽量不调度(PreferNoSchedule) , 当创建工作负载的时候,如果其他的服务器还有资源可以运行这个工作负载,那么这个工作负载会被调度到其他的节点, 如果其他的节点没有足够的资源运行这个工作负载, 那么这个工作负载就会被调度这个有 ci 污点的节点上.

​			3 不允许并驱逐已有的容器组(NoExecute) 普通工作负载不允许被调度到这个节点上,这个节点上已有的工作负载会被驱逐.



​			一般使用 尽量不调度(PreferNoSchedule) 

