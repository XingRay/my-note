下载安装 Bazel

https://github.com/bazelbuild/bazel/releases

下载 https://github.com/bazelbuild/bazel/releases/download/7.4.0/bazel-7.4.0-windows-x86_64.zip

解压到指定目录并添加该目录到PATH



设置环境变量

你可以按照以下步骤查找路径并设置环境变量：

### 1. 查找 Visual Studio 路径

如果你安装的是完整的 Visual Studio（例如 `Visual Studio 2022`），你可以使用类似以下路径：

`C:\Program Files\Microsoft Visual Studio\2022\Community`

`C:\Program Files\Microsoft Visual Studio\2022\Professional`

`C:\Program Files\Microsoft Visual Studio\2022\Enterprise`

进入到 Visual Studio 安装目录后，找到 `VC` 文件夹，并确认版本信息。



### 2 查找 VC 和 Windows SDK 版本

**VC 路径**: 一般在 `VC\Tools\MSVC` 目录下，例如：

```
makefile


复制代码
C:\Program Files\Microsoft Visual Studio\2022\Community\VC\Tools\MSVC\14.29.30133
```

其中 `14.29.30133` 就是你需要设置的 `BAZEL_VC_FULL_VERSION`。

**Windows SDK 路径**: 通常 Windows SDK 安装在 `C:\Program Files (x86)\Windows Kits\10`，在 `Lib` 文件夹中查看版本号，例如：

```
vbnet


复制代码
C:\Program Files (x86)\Windows Kits\10\Lib\10.0.19041.0
```

其中 `10.0.19041.0` 就是你需要设置的 `BAZEL_WINSDK_FULL_VERSION`。

### 3 设置环境变量

根据上述路径设置环境变量。例如，如果你安装的是 `Visual Studio 2022 Community`，可以如下设置：

```
bash复制代码set BAZEL_VS=C:\Program Files\Microsoft Visual Studio\2022\Community
set BAZEL_VC=C:\Program Files\Microsoft Visual Studio\2022\Community\VC
set BAZEL_VC_FULL_VERSION=14.29.30133
set BAZEL_WINSDK_FULL_VERSION=10.0.19041.0
```

如果你不确定路径，可以在 Visual Studio Installer 中查看你安装的组件，确保 `MSVC` 和 `Windows SDK` 都已安装。



```
set BAZEL_VS=C:\Program Files\Microsoft Visual Studio\2022\Community
set BAZEL_VC=C:\Program Files\Microsoft Visual Studio\2022\Community\VC
set BAZEL_VC_FULL_VERSION=14.29.30133
set BAZEL_WINSDK_FULL_VERSION=10.0.19041.0
```



切换conda的python版本

```
conda install python=3.11
```



安装yarn

```
npm install --global yarn
```



设置代理

```
set HTTP_PROXY=http://127.0.0.1:10809
set HTTPS_PROXY=http://127.0.0.1:10809
```

启动编译, 并且给 bazel 配置https代理

```
bazel --host_jvm_args "-DhttpsProxyHost=127.0.0.1 -DsocksProxyPort=10809" build -c opt --define MEDIAPIPE_DISABLE_GPU=1 --action_env PYTHON_BIN_PATH="D:\\develop\\python\\3.11.9\\python.exe" mediapipe/examples/desktop/hello_world
```

